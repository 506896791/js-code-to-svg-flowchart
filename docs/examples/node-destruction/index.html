<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <iframe style="position: fixed; right: 0" src="https://ghbtns.com/github-btn.html?user=Bogdan-Lyashenko&repo=js-code-to-svg-flowchart&type=star&count=true" frameborder="0" scrolling="0" width="110px" height="20px"></iframe>
    <div>
        <p id="svgImage"></p>
    </div>

    <script src="../../../dist/js2flowchart.js"></script>
    <script>
        const code = `
            const list = [1, 2, 3, 4];

            function filterAndPrint(list) {
                list = list.filter((i, b) => a);

                list.forEach(i => console.log(i));

                return false;
            }

            filterAndPrint(list);
    `;

    const {
        createFlowTreeBuilder,
        createFlowTreeModifier,
        convertFlowTreeToSvg
    } = window.js2flowchart;

    const flowTreeBuilder = createFlowTreeBuilder();
    const flowTree = flowTreeBuilder.build(code);
    const flowTreeModifier = createFlowTreeModifier();

    flowTreeModifier.destructNodeTree((node) => node.name.indexOf('.forEach') !== -1, 'and print list...');
    flowTreeModifier.applyToFlowTree(flowTree);

    document.getElementById('svgImage').innerHTML = convertFlowTreeToSvg(flowTree);

    </script>
</body>
</html>
